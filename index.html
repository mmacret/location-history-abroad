<!DOCTYPE html>
<html>
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-44623779-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-44623779-2');
  </script>

  <title>Countdown to Citizenship - Canada</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Visualize your absences from Canada using your collected Google Location History data directly in your browser.">
  <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
  <link rel="stylesheet" href="index.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.css"/>
  <link rel="stylesheet" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css"/>
  <link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.4.2/css/buttons.dataTables.min.css"/>
</head>
<body>
    <div class="mobile cache">
        <div class="center" >
            <img  src="images/smartphone.png">
            <div>
                <p>Not working on mobile yet!</p>
                <p>Try on a laptop or desktop computer.</p>
            </div>
        </div>
    </div>
    <div class="visualizer">
        <!-- Fork me on GitHub -->
        <a id="forkme" href="https://github.com/mmacret/location-history-abroad" target="_blank"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/52760788cde945287fbb584134c4cbc2bc36f904/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f77686974655f6666666666662e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png"></a>

        <!-- Shown before the heatmap is displayed -->
        <div class="container">
            <div class="content">
                <!-- Intro, before data has been uploaded -->
                <div id="intro" class="content-box">
                    <h2>Countdown to Citizenship - Canada</h2>
                    <div class="note">
                        <strong>Note:</strong> This tool currently works for Canada residents. International support is coming soon</strong>!
                    </div>
                    <p>Welcome to <b>Countdown to Citizenship</b>, a tool to help you count down your absences from Canada using your collected Google <a href="https://google.com/locationhistory" target="_blank">Location History</a> data. <i>Don't worry&mdash;all processing and visualization happens right on your computer. Nobody will have access to your Location History but you (and Google, of course).</i></p>
                    <p>To start off, you'll need to go to <a href="https://takeout.google.com/settings/takeout/custom/location_history" target="_blank">Google Takeout</a> to download your Location History data. On that page, click "Next", then click "Create archive". Once the archive has been created, click "Download". Unzip the downloaded file and open the "Location History" folder within. <b>Finally, drag and drop <i>LocationHistory.json</i> from inside that folder onto this page.</b> Let the visualization begin!</p>
                    <p class="fallback">Alternatively, select your <b>LocationHistory.json</b> file directly: <input name="file" type="file" id="file"></input></p>
                    <p class="credit">An <a target="_blank" href="https://github.com/mmacret/location-history-abroad">open source</a> project based on <a target="_blank" href="https://github.com/theopolisme/location-history-visualizer">Location History Visualizer</a>.</p>
                </div>

                <div id="working" class="processing hidden">
                    <h2>Processing data...</h2>
                    <div class="loading">
                        <div class="bounce1"></div>
                        <div class="bounce2"></div>
                        <div class="bounce3"></div>
                    </div>
                    <p><span id="currentStatus">Waking up...</span></p>
                </div>

            </div>
        </div>

        <div id="feedbackform" style="z-index: 9999;max-height: 530px;" class="content-box hidden">
            <form method="POST" action="https://formspree.io/countdowntocitizenship@matthieumacret.com" target="_blank">
              <input type="email" name="email" placeholder="Your email">
              <textarea name="message" placeholder="Your message"></textarea>
              <button type="submit">Send</button>
              <button type="button">Close</button>
          </form>
      </div>
      <div id="tablecontainer" style="z-index: 9999;max-height: 560px;" class="content-box hidden">
        <table id="datatable" class="display" cellspacing="0" width="100%">
            <thead>
                <tr>
                    <th>Color</th>
                    <th>Trip number</th>
                    <th>Start date</th>
                    <th>Finish date</th>
                    <th>Duration (days)</th>
                    <th>Location</th>         
                </tr>
            </thead>
            <tfoot>
                <tr>
                    <th>Total</th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th><span id='totaldays'>0</span> days</th>
                    <th></th>         
                </tr>
            </tfood>

        </table>
        
        <div class="credit">
            <form  action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">

                <input type="hidden" name="cmd" value="_s-xclick">
                <input type="hidden" name="hosted_button_id" value="FK9JYW7RSMNHA">
                <input type="image" style="height: 25px;" src="https://countdowntocitizenship.com/images/beer.png" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
                <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                <div>If you find this app helpful, buy me a beer!</div>
                <div>OR</div>
                <div>Sign up for occasional email updates on this and my other immigration apps:</div>
                
            </form>
            <form method="POST" action="https://formspree.io/countdowntocitizenship@matthieumacret.com" target="_blank">
                <input type="email" name="email" placeholder="Your email">
                <button type="submit">Send</button>
            </form>
        </div>

    </div>

    <div id="trip" class="trip hidden">
        <div><div id="tripColor" class="color-box" style="background-color: #FF850A;"></div><h2>Trip <span id="tripId">0</span>/<span id="tripTotal">0</span></h2></div>
        <div class="info">
            <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M2.5 19h19v2h-19zm19.57-9.36c-.21-.8-1.04-1.28-1.84-1.06L14.92 10l-6.9-6.43-1.93.51 4.14 7.17-4.97 1.33-1.97-1.54-1.45.39 1.82 3.16.77 1.33 1.6-.43 5.31-1.42 4.35-1.16L21 11.49c.81-.23 1.28-1.05 1.07-1.85z"/></svg><span id="startDate">01/01/1970</span></div>
            <div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M2.5 19h19v2h-19zm7.18-5.73l4.35 1.16 5.31 1.42c.8.21 1.62-.26 1.84-1.06.21-.8-.26-1.62-1.06-1.84l-5.31-1.42-2.76-9.02L10.12 2v8.28L5.15 8.95l-.93-2.32-1.45-.39v5.17l1.6.43 5.31 1.43z"/></svg><span id="finishDate">01/01/2010</span></div>
        </div>
        <button class="info" type="button" id="next" >Next</button>
        <button class="info" type="button" id="table" >Show table</button>
    </div>
    <div id="beer" class="beer hidden">
        <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_blank">
            <input type="hidden" name="cmd" value="_s-xclick">
            <input type="hidden" name="hosted_button_id" value="FK9JYW7RSMNHA">
            <input type="image" style="height: 40px;" src="https://countdowntocitizenship.com/images/beer.png" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
            <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
        </form>
        <span>If you find this app helpful, buy me a beer!</span>
    </div>
    
    <div id="feedback">
        <span>Feedback?</span>
        <img  src="images/feedback.svg">

    </div>
    
    <!-- The map, populated by leaflet.js -->
    <div id="map"></div>
</div>

<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.4.2/js/dataTables.buttons.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script src="https://cdn.datatables.net/buttons/1.4.2/js/buttons.html5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.2.0/leaflet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/3.8.4/dropzone.min.js"></script>
<script src="https://cdn.jsdelivr.net/bluebird/latest/bluebird.core.min.js"></script>
<script src="lib/snakeanim.js"></script>
<script src="lib/prettysize.js"></script>
<script src="lib/oboe-browser.min.js"></script>
<script src="lib/countries.geo.js"></script>
<script src="index.js"></script>

</body>
</html>
